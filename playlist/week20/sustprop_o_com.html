<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustantivos: Propios y Comunes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap');
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f0fdf4; /* Verde muy suave */
            color: #1e293b;
        }

        .word-card {
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 2px solid #e2e8f0;
            transition: all 0.2s;
        }

        .correct {
            border-color: #22c55e !important;
            background-color: #f0fdf4 !important;
            color: #15803d !important;
        }

        .incorrect {
            border-color: #ef4444 !important;
            background-color: #fef2f2 !important;
            color: #b91c1c !important;
        }

        select, input {
            border: 2px solid #cbd5e1;
            border-radius: 12px;
            padding: 0.8rem;
            outline: none;
            font-weight: 700;
            font-size: 1.1rem;
            transition: border-color 0.2s;
        }

        .instruction-box {
            background-color: #ffffff;
            border: 4px dashed #22c55e;
            border-radius: 25px;
            position: relative;
        }

        .btn-audio {
            background-color: #dcfce7;
            border: 2px solid #22c55e;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 0 #16a34a;
        }

        .btn-audio:active {
            transform: translateY(4px);
            box-shadow: 0 0px 0 #16a34a;
        }

        .word-display {
            font-size: 1.5rem;
            color: #334155;
            font-weight: 700;
        }
    </style>
</head>
<body>

    <div class="max-w-4xl mx-auto p-4 mb-20">
        <header class="text-center my-8">
            <h1 class="text-5xl font-bold text-green-600 mb-4">üè∑Ô∏è Los Sustantivos</h1>
            
            <!-- Instrucciones con Bocina Optimizada -->
            <div class="instruction-box p-8 mt-6 mb-10 shadow-lg flex flex-col md:flex-row items-center gap-6">
                <div class="flex-grow text-left">
                    <p class="text-2xl font-bold text-green-700 mb-4 flex items-center">
                        <span class="mr-2">üìù</span> Instrucciones:
                    </p>
                    <p id="texto-instrucciones" class="text-xl text-slate-600 leading-relaxed font-medium">
                        Lee la palabra, luego enseguida elije si es sustantivo propio o comun, y en seguida escribe la palabra como debe ser escrita no olvides los acentos. Como siempre sabes que si se ilumina en verde esta bien pero si se ilumina en rojo debes volver a intentar.
                    </p>
                </div>
                
                <div class="flex flex-col items-center">
                    <button class="btn-audio" onclick="leerInstrucciones()">
                        <span class="text-3xl">üì¢</span>
                    </button>
                    <span class="text-xs font-bold text-green-600 mt-2 uppercase">¬°Escucha!</span>
                </div>
            </div>
        </header>

        <div id="ejercicios" class="space-y-6">
            <!-- Din√°mico -->
        </div>
    </div>

    <script>
        // Configuraci√≥n de Voz para iOS/iPad
        let vocesDisponibles = [];

        function cargarVoces() {
            vocesDisponibles = window.speechSynthesis.getVoices();
        }

        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = cargarVoces;
        }

        function leerInstrucciones() {
            window.speechSynthesis.cancel();

            const texto = document.getElementById('texto-instrucciones').innerText;
            const mensaje = new SpeechSynthesisUtterance(texto);
            
            mensaje.lang = 'es-MX';
            mensaje.rate = 0.9;   
            mensaje.pitch = 1.2;  

            const vozPreferida = vocesDisponibles.find(v => 
                (v.lang.includes('es')) && 
                (v.name.includes('Sofia') || v.name.includes('Sandra') || v.name.includes('Ni√±a') || v.name.includes('Femenina') || v.name.includes('Monica'))
            );

            if (vozPreferida) {
                mensaje.voice = vozPreferida;
            }

            window.speechSynthesis.speak(mensaje);
        }

        const palabras = [
            { base: "perro", tipo: "comun", correcta: "perro" },
            { base: "m√©xico", tipo: "propio", correcta: "M√©xico" },
            { base: "mar√≠a", tipo: "propio", correcta: "Mar√≠a" },
            { base: "gato", tipo: "comun", correcta: "gato" },
            { base: "espa√±a", tipo: "propio", correcta: "Espa√±a" },
            { base: "casa", tipo: "comun", correcta: "casa" },
            { base: "juan", tipo: "propio", correcta: "Juan" },
            { base: "mesa", tipo: "comun", correcta: "mesa" },
            { base: "l√°piz", tipo: "comun", correcta: "l√°piz" },
            { base: "amazonas", tipo: "propio", correcta: "Amazonas" },
            { base: "ni√±o", tipo: "comun", correcta: "ni√±o" },
            { base: "luis", tipo: "propio", correcta: "Luis" },
            { base: "escuela", tipo: "comun", correcta: "escuela" },
            { base: "ana", tipo: "propio", correcta: "Ana" },
            { base: "francia", tipo: "propio", correcta: "Francia" },
            { base: "pelota", tipo: "comun", correcta: "pelota" },
            { base: "sol", tipo: "comun", correcta: "sol" },
            { base: "paco", tipo: "propio", correcta: "Paco" },
            { base: "libro", tipo: "comun", correcta: "libro" },
            { base: "jap√≥n", tipo: "propio", correcta: "Jap√≥n" },
            { base: "p√°jaro", tipo: "comun", correcta: "p√°jaro" },
            { base: "beto", tipo: "propio", correcta: "Beto" },
            { base: "r√≠o", tipo: "comun", correcta: "r√≠o" },
            { base: "lola", tipo: "propio", correcta: "Lola" },
            { base: "√°rbol", tipo: "comun", correcta: "√°rbol" },
            { base: "italia", tipo: "propio", correcta: "Italia" },
            { base: "flor", tipo: "comun", correcta: "flor" },
            { base: "santiago", tipo: "propio", correcta: "Santiago" },
            { base: "ciudad", tipo: "comun", correcta: "ciudad" },
            { base: "luc√≠a", tipo: "propio", correcta: "Luc√≠a" },
            { base: "silla", tipo: "comun", correcta: "silla" },
            { base: "argentina", tipo: "propio", correcta: "Argentina" },
            { base: "fruta", tipo: "comun", correcta: "fruta" },
            { base: "pedro", tipo: "propio", correcta: "Pedro" },
            { base: "carro", tipo: "comun", correcta: "carro" },
            { base: "colombia", tipo: "propio", correcta: "Colombia" },
            { base: "vaca", tipo: "comun", correcta: "vaca" },
            { base: "elena", tipo: "propio", correcta: "Elena" },
            { base: "nube", tipo: "comun", correcta: "nube" },
            { base: "per√∫", tipo: "propio", correcta: "Per√∫" },
            { base: "cami√≥n", tipo: "comun", correcta: "cami√≥n" },
            { base: "rosa", tipo: "propio", correcta: "Rosa" },
            { base: "puerta", tipo: "comun", correcta: "puerta" },
            { base: "chile", tipo: "propio", correcta: "Chile" },
            { base: "juguete", tipo: "comun", correcta: "juguete" },
            { base: "sof√≠a", tipo: "propio", correcta: "Sof√≠a" },
            { base: "maestra", tipo: "comun", correcta: "maestra" },
            { base: "canad√°", tipo: "propio", correcta: "Canad√°" },
            { base: "rat√≥n", tipo: "comun", correcta: "rat√≥n" },
            { base: "mateo", tipo: "propio", correcta: "Mateo" }
        ];

        const container = document.getElementById('ejercicios');

        palabras.forEach((p, index) => {
            const div = document.createElement('div');
            div.className = "word-card grid grid-cols-1 md:grid-cols-4 gap-6 items-center";
            
            div.innerHTML = `
                <div class="flex items-center space-x-4">
                    <span class="bg-green-100 text-green-700 rounded-full min-w-[32px] h-8 flex items-center justify-center text-sm font-bold shadow-sm">${index + 1}</span>
                    <span class="word-display lowercase">${p.base}</span>
                </div>
                
                <select onchange="checkTipo(this, '${p.tipo}')" class="w-full h-full">
                    <option value="">¬øTipo? ü§î</option>
                    <option value="comun">Com√∫n</option>
                    <option value="propio">Propio</option>
                </select>

                <input type="text" 
                    placeholder="Escribe aqu√≠..." 
                    oninput="checkEscritura(this, '${p.correcta}')"
                    class="w-full"
                >
                
                <div class="text-center md:text-right text-sm font-black status-icon"></div>
            `;
            container.appendChild(div);
        });

        function checkTipo(element, correctValue) {
            if (element.value === "") {
                element.classList.remove('correct', 'incorrect');
            } else if (element.value === correctValue) {
                element.classList.add('correct');
                element.classList.remove('incorrect');
            } else {
                element.classList.add('incorrect');
                element.classList.remove('correct');
            }
        }

        function checkEscritura(element, correctValue) {
            const val = element.value.trim();
            const parent = element.parentElement;
            const iconArea = parent.querySelector('.status-icon');

            if (val === "") {
                element.classList.remove('correct', 'incorrect');
                iconArea.innerHTML = "";
            } else if (val === correctValue) {
                element.classList.add('correct');
                element.classList.remove('incorrect');
                iconArea.innerHTML = "<span class='text-green-600 text-xl'>‚ú® ¬°Genial!</span>";
            } else {
                element.classList.add('incorrect');
                element.classList.remove('correct');
                iconArea.innerHTML = "<span class='text-red-500'>Vuelve a intentar ‚ùå</span>";
            }
        }

        window.onload = cargarVoces;
    </script>
</body>
</html>
